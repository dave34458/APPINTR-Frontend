{% load static %}
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Educare - Webflow HTHM website template</title>
  <meta content="Educare - Webflow HTHM website template" property="og:title">
  <meta content="Educare - Webflow HTHM website template" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="{% static 'css/styles1.css' %}" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/webflow@1.6.3/webflow.min.js"></script>
  <script src="{% static 'js/script1.js' %}"></script>
  <script src="{% static 'js/script2.js' %}"></script>
  <script src="{% static 'js/script3.js' %}"></script>
  <script src="{% static 'js/script4.js' %}"></script>
  <script src="{% static 'js/script5.js' %}"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Noto+Sans:400,700" media="all">
  <style>
    ._3-col-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(330px, 1fr));
      gap: 20px;
      padding: 20px;
    }

    .book-card {
      background-color: #fff;
      box-shadow: 0 0 0 rgba(0, 0, 0, 0.1);
      overflow: hidden;
      transition: transform 0.3s, box-shadow 0.3s;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .book-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .book-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .card-title {
      transition: color 0.3s;
    }

    .card-title:hover {
      color: #9741ff;
    }

    .card-data p {
      font-size: .9rem;
      color: #555;
      margin-bottom: 10px;
    }

    .author-info {
      display: flex;
      justify-content: space-between;
      padding: 10px;
    }

    .author-name {
      font-size: .9rem;
      font-weight: bold;
      color: #333;
    }

    .published-date {
      font-size: .8rem;
      color: #888;
    }

    /* Minimalist dot styling for availability status */
    .availability-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      display: inline-block;
    }

    .available {
      background-color: green;
    }

    .unavailable {
      background-color: red;
    }

    @media (max-width: 768px) {
      .card-title {
        font-size: .9rem;
      }

      .card-data p {
        font-size: .8rem;
      }

      .author-name,
      .published-date {
        font-size: .8rem;
      }
    }
  </style>
</head>
<body>
  <div class="page-wrap">
    <div data-collapse="medium" data-animation="default" data-duration="400" class="sidebar w-nav">
      <div class="nav-container w-container">
        <a href="index.html" class="brand w-nav-brand w--current"><img src="{% static 'icons/image1.svg' %}" alt="" class="logo"></a>
        <nav class="nav-menu w-nav-menu">
          <a href="index.html" class="navlink w-inline-block w--current"><img src="https://cdn.prod.website-files.com/67dbed726dc9ce53f2292560/67dbed726dc9ce53f22925e1_Home.svg" width="22" class="icon"><div>Home</div></a>
          <a href="Lessons/lessons.html" class="navlink w-inline-block"><img src="https://cdn.prod.website-files.com/67dbed726dc9ce53f2292560/67dbed726dc9ce53f22925e7_Document.svg" width="22" class="icon"><div>Lessons</div></a>
          <a href="Assignments/assignments.html" class="navlink w-inline-block"><img src="https://cdn.prod.website-files.com/67dbed726dc9ce53f2292560/67dbed726dc9ce53f22925e3_Calendar.svg" width="22" class="icon"><div>Assignments</div></a>
          <a href="News/news.html" class="navlink w-inline-block"><img src="https://cdn.prod.website-files.com/67dbed726dc9ce53f2292560/67dbed726dc9ce53f22925e8_Discovery.svg" width="22" class="icon"><div>News</div></a>
          {% if is_authenticated %}
            <a href="{% url 'library:logout' %}" class="navlink w-inline-block"><img src="https://cdn.prod.website-files.com/67dbed726dc9ce53f2292560/67dbed726dc9ce53f22925e4_Message.svg" width="22" class="icon"><div>Logout</div></a>
          {% else %}
            <a href="{% url 'library:login' %}" class="navlink w-inline-block"><img src="https://cdn.prod.website-files.com/67dbed726dc9ce53f2292560/67dbed726dc9ce53f22925e4_Message.svg" width="22" class="icon"><div>Login</div></a>
          {% endif %}
        </nav>
        <div class="menu-button w-nav-button"><div class="menu-icon w-icon-nav-menu"></div></div>
      </div>
    </div>
    <div class="content-wrap">
      <div class="section">
        <h2 class="section-title">Books</h2>
        <div class="w-dyn-list">
          <div class="_3-col-grid w-dyn-items">
            {% for book in books %}
              <div class="card book-card">
                <a href="{% url 'library:book_detail' book.id %}" class="card-link image w-inline-block">
                  <img src="{{ book.preview_image }}" alt="{{ book.title }}" class="book-image">
                </a>
                <div class="card-data books">
                  <!-- New Category div for genre -->
                  <div class="category" id="category-{{ book.id }}">{{ book.genre }}</div>
                  <a href="{% url 'library:book_detail' book.id %}" class="card-link w-inline-block">
                    <h3 class="card-title">{{ book.title }}</h3>
                    <p>{{ book.description|truncatewords:20 }}</p>
                  </a>
                </div>
                <div class="author-info lesson-card w-inline-block">
                  {% if book.is_available %}
                    <!-- Green dot for available books -->
                    <div class="availability-dot available"></div>
                  {% else %}
                    <!-- Red dot for unavailable books -->
                    <div class="availability-dot unavailable"></div>
                  {% endif %}
                  <div class="author-name">{{ book.author }}</div>
                  <div class="published-date">{{ book.published_date }}</div>
                </div>
              </div>
            {% empty %}
              <p>No books available.</p>
            {% endfor %}
          </div>
        </div>
        <div class="button-wrapper">
          <a href="Books/books.html" class="button w-button">View all</a>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
